<div class="calendar-container">
  <div
    class="toggle-section"
    [dir]="dir"
    *ngIf="canChangeMode"
    (click)="changeCalendarMode()"
    [ngStyle]="{ color: styles.primaryColor }"
  >
    <label class="switch">
      <input
        type="checkbox"
        [disabled]="!canChangeMode"
        justify="end"
        [(ngModel)]="toggle"
        [ngStyle]="{ 'accent-color': styles.primaryColor }"
      />
    </label>
    <span> {{ hijriDateText }} </span>
  </div>

  <div
    class="todays-date-section"
    *ngIf="todaysDateSection"
    [ngStyle]="{
      'background-color': styles.backgroundColor,
      color: styles.primaryColor
    }"
  >
    <div
      class="text-info"
      [ngClass]="{
        order: dir == 'rtl'
      }"
    >
      <p>{{ todaysDateText }}</p>
    </div>

    <div
      class="data"
      [dir]="dir"
      [ngStyle]="{
        'background-color': styles.todaysDateBgColor,
        color: styles.todaysDateTextColor
      }"
    >
      <p *ngIf="mode == 'hijri'">
        {{ currentDate.split("/")[2] }}

        {{
          locale == "ar"
            ? hijriMonths[this.parseArabic(currentDate.split("/")[1]) - 1]
                ?.nameAr
            : hijriMonths[this.parseArabic(currentDate.split("/")[1]) - 1]
                ?.nameEn
        }}

        {{ currentDate.split("/")[0] }}
      </p>

      <p *ngIf="mode == 'greg'">{{ currentDate }}</p>
    </div>
  </div>

  <div class="period-container">
    <form [formGroup]="periodForm" class="period-form">
      <div
        class="select-item"
        [ngClass]="{
          order: dir == 'ltr'
        }"
        [ngStyle]="{ 'background-color': styles.backgroundColor }"
      >
        <label *ngIf="!selectedYearAndMonth['year'].value">السنة</label>

        <select
          formControlName="years"
          class="{{ 'icon-' + dir }}"
          placeholder="السنة"
          (change)="onPeriodChange('year')"
          [dir]="dir"
          [ngStyle]="{ color: styles.primaryColor }"
        >
          <option *ngFor="let year of years" [ngValue]="year">
            {{ year?.text }}
          </option>
        </select>
      </div>

      <div
        class="select-item"
        [ngClass]="{
          order: dir == 'rtl'
        }"
        [ngStyle]="{ 'background-color': styles.backgroundColor }"
      >
        <label *ngIf="!selectedYearAndMonth['month'].value">الشهر</label>

        <select
          class="{{ 'icon-' + dir }}"
          formControlName="months"
          placeholder="الشهر"
          (change)="onPeriodChange('month')"
          [dir]="dir"
          [ngStyle]="{ color: styles.primaryColor }"
        >
          <option *ngFor="let month of months" [ngValue]="month">
            {{ locale == "ar" ? month?.nameAr : month?.nameEn }}
          </option>
        </select>
      </div>
    </form>
  </div>

  <div
    class="calendar-layout"
    [ngStyle]="{ 'background-color': styles.backgroundColor }"
  >
    <div class="week-days">
      <div
        class="week-day"
        [ngStyle]="{ color: styles.secondaryColor }"
        *ngFor="let date of locale == 'ar' ? weekdaysAr : weekdaysEn"
      >
        {{ date }}
      </div>
    </div>

    <div [dir]="dir">
      <div class="week" *ngFor="let week of days">
        <div
          class="day"
          *ngFor="let day of week"
          (click)="disableDayPicker == false ? onDayClicked(day) : ''"
          [ngStyle]="{
            'background-color': styles.backgroundColor,
            color: styles.primaryColor
          }"
        >
          <div
            id="greg-day"
            [ngClass]="{
              'todays-date': checkTodaysDate(day),
              'selected-date': day?.selected == true
            }"
            [ngStyle]="{
              border: checkTodaysDate(day)
                ? '1px solid ' + styles.secondaryColor
                : '',
              'background-color':
                day?.selected == true ? styles.secondaryColor : '',
              color:
                (day?.selected == true ? styles.todaysDateTextColor : '') ||
                (checkFutureValidation(day) && futureValidation
                  ? styles.disabledDayColor
                  : '')
            }"
          >
            <span *ngIf="mode == 'greg'">{{
              day?.gregorian?.split("/")[2] | number
            }}</span>

            <span id="hijri-day" *ngIf="mode == 'hijri'">{{
              parseEnglish(day?.hijri?.split("/")[2] | number)
            }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div>
    <button
      type="button"
      class="confirm-btn"
      [disabled]="
        (!selectedDate && !multiple) ||
        (!multipleSelectedDates.length && multiple)
      "
      (click)="onConfirmClicked()"
      *ngIf="!disableDayPicker"
      [ngStyle]="{
        'background-color': styles.secondaryColor,
        color: styles.confirmBtnTextColor
      }"
    >
      {{ submitTextButton }}
    </button>
  </div>
</div>
